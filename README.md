# Looper - Автоматизация действий пользователя

Программа для записи, декомпозиции и воспроизведения действий пользователя (мышь и клавиатура).

## Структура проекта

```
looper/
├── src/                    # Исходный код приложения
│   ├── __init__.py
│   ├── looper.py          # Главный модуль
│   ├── config.py          # Конфигурация
│   ├── rec.py             # Модуль записи
│   ├── play.py            # Модуль воспроизведения
│   ├── decomposer.py      # Модуль декомпозиции
│   ├── mouse_clicker.py   # Утилиты для работы с мышью
│   ├── scenario_creator.py # Создание сценариев
│   └── scenario_viewer.py  # Просмотр сценариев
├── main.py                # Точка входа приложения
├── setup.py               # Установочный скрипт
├── requirements.txt       # Зависимости
├── actions/               # Папка с записанными действиями
├── data/                  # Тестовые данные
└── looper.config          # Конфигурационный файл
```

## Установка

```bash
pip install -r requirements.txt
pip install -e .
```

После установки команда `looper` будет доступна глобально из любой папки.

Альтернативный способ запуска (без установки):
```bash
python main.py --help
```

## Конфигурация

Программа использует конфигурационный файл `looper.config` для настройки путей и параметров.

По умолчанию все действия сохраняются в папку `./data`.

## Использование

### Запись действий
```bash
# После установки пакета (рекомендуется):
looper --record open_notepad
# или короткая форма:
looper -r open_notepad

# Альтернативно (без установки):
python main.py --record open_notepad
```

### Воспроизведение действий
```bash
# После установки пакета:
looper --play open_notepad
# или короткая форма:
looper -p open_notepad

# Альтернативно (без установки):
python main.py --play open_notepad
```

### Декомпозиция на базовые действия
```bash
# После установки пакета:
looper --decompose open_notepad
# или короткая форма:
looper -d open_notepad

# Альтернативно (без установки):
python main.py --decompose open_notepad
```

### Создание сценариев
```bash
# После установки пакета:
looper --scenario open_notepad --output my_scenario
# или короткая форма:
looper -sc open_notepad -o my_scenario

# Альтернативно (без установки):
python main.py --scenario open_notepad --output my_scenario
```

## Структура файлов

```
./actions/
├── open_notepad/
│   ├── log.json                    # Записанные действия
│   ├── actions_base.json           # Базовые действия после декомпозиции
│   ├── typing_parameters_base.csv  # Параметры typing действий (создается автоматически)
│   ├── 1.png                      # Скриншоты активных действий
│   ├── 2.png
│   └── ...
└── другие_действия/
```

## Возможности

- **Запись**: Фиксирует все действия мыши и клавиатуры
- **Воспроизведение**: Выполняет записанные действия
- **Декомпозиция**: Преобразует записанные действия в базовые команды
- **Автоматическое создание CSV**: При декомпозиции создается `typing_parameters_base.csv` с параметрами для typing действий
- **Прерывание**: Нажатие ESC останавливает запись или воспроизведение
- **Сценарии**: Создание модифицированных версий действий с возможностью изменения параметров ввода

## Примеры действий

В проекте есть примеры записанных действий:
- `calculator/` - работа с калькулятором
- `open_notepad/` - открытие блокнота
- `open_yandex/` - открытие браузера

## Конфигурация

Файл `looper.config`:
```ini
ACTION_FOLDER = ./data
```

Можно изменить папку для сохранения действий, например:
```ini
ACTION_FOLDER = D:/MyActions
```

## Автор

**Lykov Alexander**

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле [LICENSE](LICENSE).
